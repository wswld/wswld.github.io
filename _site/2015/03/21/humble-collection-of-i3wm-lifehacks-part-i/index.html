<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Humble Collection of i3wm Lifehacks: Part I &middot; וסוולוד
    
  </title>

  <link rel="stylesheet" href="/styles.css">
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="וסוולוד" href="/atom.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">וסוולוד</a>
        </h3>
        <div class="subtitle"><small>Running behind the schedule since 1989.</small></div>
      </header>


      <main>
        <article class="post">
  <h1 class="post-title">Humble Collection of i3wm Lifehacks: Part I</h1>
  <time datetime="2015-03-21T23:33:20+03:00" class="post-date">21 Mar 2015</time>
  <h3>Lifehack 1: Locking the Screen</h3>
<p>This is kinda a nobrainer, but me myself sometimes look for a place, where to copy some of the syntax (I'm lazy and don't always keep that in my head), so let's start with this one. i3wm ships with beautiful and robust screen locker <tt>i3lock</tt>, which can be launched like that:</p>
<p>[code language="bash"]<br />
i3lock -c 000000<br />
[/code]</p>
<p>It will lock the screen with black overlay. The problem is, that you wouldn't be typing this command every time you want to lock the screen. We need to add a shortcut to i3 config file:</p>
<p>[code language="bash"]<br />
bindsym $mod+Shift+Tab exec &quot;i3lock -c 000000&quot;<br />
[/code]</p>
<p>Now when we press the combination of mod-button (<kbd>Win</kbd> in my case) and <kbd>Shift</kbd>+<kbd>Tab</kbd> - our screen gets locked.</p>
<h3>Lifehack 2: Activating/Disactivating the Second Screen</h3>
<p>If you use i3wm on daily basis, you probably know, that the second screen is not turned on automatically. You should manage displays manually with <tt>xrandr</tt> command. If we run this command without attributes, we're gonna get something like this:</p>
<p>[code language="bash"]<br />
Screen 0: minimum 320 x 200, current 3200 x 1080, maximum 8192 x 8192<br />
LVDS1 connected 1280x800+1920+0 (normal left inverted right x axis y axis) 261mm x 163mm<br />
   1280x800      60.02*+  50.05<br />
   1024x768      60.00<br />
   800x600       60.32    56.25<br />
   640x480       59.94<br />
VGA1 connected 1920x1080+0+0 (normal left inverted right x axis y axis) 521mm x 293mm<br />
   1920x1080     60.00*+<br />
   1680x1050     59.95<br />
   1280x1024     75.02    60.02<br />
   1440x900      59.89<br />
   1280x960      60.00<br />
   1280x720      59.97<br />
   1024x768      75.08    70.07    60.00<br />
   832x624       74.55<br />
   800x600       72.19    75.00    60.32    56.25<br />
   640x480       75.00    72.81    66.67    60.00<br />
   720x400       70.08<br />
HDMI1 disconnected (normal left inverted right x axis y axis)<br />
DP1 disconnected (normal left inverted right x axis y axis)<br />
[/code]</p>
<p>On some rare occasion writing something like this would not be a problem:</p>
<p>[code language="bash"]<br />
xrandr --output VGA1 --right-of LVDS1 --auto<br />
[/code]</p>
<p><em>Well, I know you're probably well aware of how</em> <tt>xrandr</tt> <em>works. Just in case.</em></p>
<p>It may get pretty redundant if you use second screen on daily basis and regularly unplug it from your laptop. The best way to go would be to add script shortcut to your <tt>/usr/bin/</tt> or <tt>/bin/</tt> directory. Run the following lines:</p>
<p>[code language="bash"]<br />
printf '#!/bin/bash\n\nxrandr --output VGA1 --right-of LVDS1 --auto' &gt; /usr/bin/screenswitch<br />
chmod 755 /usr/bin/screenswitch<br />
[/code]</p>
<p>We can use <tt>screenswitch</tt> command which doesn't make it much easier. What would certainly help us is a key shortcut, so let's add a line similar to one in the previous hack to our i3 configuration:</p>
<p>[code language="bash"]<br />
bindsym XF86Display exec &quot;screenswitch&quot;<br />
[/code]</p>
<p>Now when you press on your special key combo (<kbd>Fn</kbd>+<kbd>F7</kbd> on my ThinkPad), you enable/disable the second screen. Try some other key combination if you have no special display button. Of course the script itself is pretty basic and it would work only if your screen works well in auto and you use the same second screen daily. However, there are more complex scripts available all over the web (<a href="http://www.thinkwiki.org/wiki/Sample_Fn-F7_script">example</a>).</p>
<h3>Lifehack 3: Locking the Screen on Wake</h3>
<p>If you use <tt>pm-utils</tt> with your i3wm setup, you've probably noticed that the screen is not locked, when the laptop is awakened after suspend or hibernate. It's very insecure. Let's try to fix it. Create file <tt>cat /etc/pm/sleep.d/91blocker</tt> and add the following lines to it:</p>
<p>[code language="bash"]<br />
#!/bin/sh<br />
case &quot;$1&quot; in<br />
        thaw|resume)<br />
                su youruser -c '/usr/bin/i3lock -c 000000'<br />
                ;;<br />
        *) exit $NA<br />
                ;;<br />
esac<br />
[/code]</p>
<p>Don't forget to change <tt>youruser</tt> to your username. Now let's make sure we have all the right permissions:</p>
<p>[code]<br />
chmod 755 /etc/pm/sleep.d/91blocker<br />
[/code]</p>
<p>Now, if we run <tt>pm-suspend</tt> or <tt>pm-hibernate</tt> our screen is going to be locked on wake. This script has one shortcoming though: it doesn't lock the screen instantly, so you may see stuff for a couple of seconds before it gets locked. If it is not a critical issue to you, feel free to use it, othrewise you may need to work on it or find a different solution altogether. If you have any ideas how to improve it, let me know.</p>

</article>


<aside class="related">
  <h3>Related posts</h3>
  <ul class="related-posts">
    
      <li>
        <a href="/2017/06/01/limitations-of-beeminder-model/">
          Limitations of the Beeminder Model
          <small><time datetime="2017-06-01T00:00:00+03:00">01 Jun 2017</time></small>
        </a>
      </li>
    
      <li>
        <a href="/2017/03/06/aspiring-photographers-are-quitting-instagram-en-masse-and-heres-why/">
          Aspiring Photographers are Quitting Instagram en Masse and Here's Why
          <small><time datetime="2017-03-06T00:00:00+03:00">06 Mar 2017</time></small>
        </a>
      </li>
    
      <li>
        <a href="/2016/10/07/til-mongo-sucks/">
          TIL: Mongo Sucks
          <small><time datetime="2016-10-07T16:19:06+03:00">07 Oct 2016</time></small>
        </a>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2017-12-25T19:44:50+03:00">2017</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
  </body>
</html>
